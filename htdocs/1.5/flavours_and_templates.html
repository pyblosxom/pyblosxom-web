

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Flavours and Templates &mdash; PyBlosxom 1.5 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PyBlosxom 1.5 documentation" href="index.html" />
    <link rel="next" title="Syndication" href="syndication.html" />
    <link rel="prev" title="Writing Entries" href="writing_entries.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="syndication.html" title="Syndication"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="writing_entries.html" title="Writing Entries"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PyBlosxom 1.5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="flavours-and-templates">
<span id="id1"></span><h1>Flavours and Templates<a class="headerlink" href="#flavours-and-templates" title="Permalink to this headline">¶</a></h1>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>This chapter covers the blosxom renderer in PyBlosxom.  There are other
renderers (like the debug renderer) that operate differently.  See
the chapter on <a class="reference internal" href="renderers.html#renderers"><em>renderers</em></a> for more details.</p>
<p>If you want your blog rendered using a different template system&#8212;say
Cheetah or htmltmpl&#8212;implement a renderer that renders the output.
This new renderer can be implemented as a PyBlosxom plugin.  See the
chapter on writing plugins for more information.</p>
<p>The rest of this chapter talks about the various things you can do with
the blosxom renderer which comes with PyBlosxom.</p>
</div>
<div class="section" id="id2">
<h2>Flavours and templates<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>The blosxom renderer renders the output of a request with a
<a class="reference internal" href="glossary.html#term-flavour"><em class="xref std std-term">flavour</em></a>.</p>
<p>A <a class="reference internal" href="glossary.html#term-flavour"><em class="xref std std-term">flavour</em></a> is a group of templates for a specific output format
or style.  For example, html, xhtml, atom, rss, rdf, etc.</p>
<p>A flavour consists of at least the following templates:</p>
<ul class="simple">
<li><strong>content_type</strong> - holds the content type of the flavour</li>
<li><strong>head</strong> - holds everything before all the entries</li>
<li><strong>story</strong> - holds a single entry</li>
<li><strong>foot</strong> - holds everything after all the entries</li>
<li><strong>date_head</strong> - shows at the start of a date</li>
<li><strong>date_foot</strong> - shows at the end of a date</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Many plugins require additional templates to render their output in
addition to the standard templates listed above.  See the
documentation for the plugin for more information.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Refer to <a class="reference internal" href="dev_architecture.html#lifecycle-of-the-blosxom-renderer"><em>Lifecycle of a PyBlosxom request</em></a> for detailed
information on how Pyblosxom&#8217;s default renderer blosxom uses these
templates.</p>
</div>
<p>More on flavours, how they&#8217;re stored, and such later.</p>
<p>A <a class="reference internal" href="glossary.html#term-template"><em class="xref std std-term">template</em></a> is one piece of a flavour that specifies a specific
portion of the output.  For example, the head template of an html
flavour would be in a file called <tt class="docutils literal"><span class="pre">head</span></tt> and might look like this:</p>
<div class="highlight-python"><pre>&lt;html&gt;
&lt;head&gt;
   &lt;title&gt;$(blog_title)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;</pre>
</div>
<p>More on templates later.</p>
<p>PyBlosxom allows you to manage the flavours and templates for your
blog in several different ways:</p>
<ol class="arabic simple">
<li>in directories in the flavourdir, OR</li>
<li>in directories in the datadir, OR</li>
<li>in the datadir along with your entries.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PyBlosxom is backwards compatible with previous versions of
PyBlosxom.  You can put your flavour files in your datadir.  You
can also put your flavour files in the categories of your datadir.
However you cannot have a flavourdir and put flavour files in your
datadir&#8212;PyBlosxom will look at <strong>EITHER</strong> your datadir <strong>OR</strong>
your flavourdir for flavour files.</p>
</div>
<div class="section" id="storing-flavours-in-the-flavourdir">
<h3>Storing flavours in the flavourdir<a class="headerlink" href="#storing-flavours-in-the-flavourdir" title="Permalink to this headline">¶</a></h3>
<p>This is the easiest way to store your flavours separately from the
entries in your blog.  This is the preferred way.</p>
<p>If you specify the <tt class="docutils literal"><span class="pre">flavourdir</span></tt> directory in your <tt class="docutils literal"><span class="pre">config.py</span></tt> file,
you can store each flavour in a directory in the flavourdir.</p>
<p>For example, Joe has this in his <tt class="docutils literal"><span class="pre">config.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">py</span><span class="p">[</span><span class="s">&quot;flavourdir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;/home/joe/blog/flavours/&quot;</span>
</pre></div>
</div>
<p>Joe&#8217;s blog directory structure would look like this:</p>
<div class="highlight-python"><pre>/home/joe/blog/
          |- entries/             &lt;-- datadir
          |  |- work/             &lt;-- work category of entries
          |  |- home/             &lt;-- home category of entries
          |
          |- flavours/
             |- html.flav/        &lt;-- html flavour
             |  |- content_type
             |  |- head
             |  |- foot
             |  |- story
             |  |- ...
             |
             |- rss.flav/         &lt;-- rss flavour
             |  |- content_type
             |  |- head
             |  |- foot
             |  |- story
             |  |- ...</pre>
</div>
<p>The <tt class="docutils literal"><span class="pre">flavourdir</span></tt> specifies the directory in which Joe stores his
flavours.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Flavour directories must end in <tt class="docutils literal"><span class="pre">.flav</span></tt>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Templates in the flavour directory don&#8217;t need an extension.</p>
</div>
<p>This structure also makes it easier to use flavour packs found in the
flavour registry on the <a class="reference external" href="http://pyblosxom.bluesock.org/">PyBlosxom website</a>.</p>
</div>
<div class="section" id="storing-flavours-in-flavour-directories-in-the-datadir">
<h3>Storing flavours in flavour directories in the datadir<a class="headerlink" href="#storing-flavours-in-flavour-directories-in-the-datadir" title="Permalink to this headline">¶</a></h3>
<p>Flavours can be stored in directories in the directory specified by
your datadir.  This works exactly the same as having a separate
flavourdir except that the flavourdir is not a separate directory
tree&#8212;it&#8217;s the same tree as your datadir.</p>
<p>For example, Joe stores his flavours alongside his entries and his
blog directory tree looks like this:</p>
<div class="highlight-python"><pre>/home/joe/blog/
          |- entries/             &lt;-- datadir
             |- html.flav/        &lt;-- html flavour
             |  |- content_type
             |  |- head
             |  |- foot
             |  |- story
             |  |- ...
             |
             |- work/             &lt;-- work category of entries
             |  |- html.flav/     &lt;-- html flavour for the work category
             |  |- ...
             |
             |- home/             &lt;-- home category of entries</pre>
</div>
<p>In this way your entries are intermixed with your flavour directories.</p>
</div>
<div class="section" id="storing-flavours-in-the-datadir">
<h3>Storing flavours in the datadir<a class="headerlink" href="#storing-flavours-in-the-datadir" title="Permalink to this headline">¶</a></h3>
<p>Instead of storing flavour templates in separate flavour directories
in either your datadir or your flavourdir, you can store the templates
alongside your entries.</p>
<p>This is not recommended&#8212;it&#8217;s a pain in the ass to maintain and
everything gets all mixed up.  It&#8217;s supported since this is how
PyBlosxom used to work.</p>
<p>The template files for a given flavour all have to have the flavour
name as the extension of the file.  For example, if you were using an
&#8220;html&#8221; flavour, the flavour itself would be composed of the following
files:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">content_type.html</span></tt></li>
<li><tt class="docutils literal"><span class="pre">head.html</span></tt></li>
<li><tt class="docutils literal"><span class="pre">story.html</span></tt></li>
<li><tt class="docutils literal"><span class="pre">foot.html</span></tt></li>
<li><tt class="docutils literal"><span class="pre">date_head.html</span></tt></li>
<li><tt class="docutils literal"><span class="pre">date_foot.html</span></tt></li>
</ul>
<p>If you want to create an &#8220;atom&#8221; flavour, you would have the following
files:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">content_type.atom</span></tt></li>
<li><tt class="docutils literal"><span class="pre">head.atom</span></tt></li>
<li><tt class="docutils literal"><span class="pre">story.atom</span></tt></li>
<li><tt class="docutils literal"><span class="pre">foot.atom</span></tt></li>
<li><tt class="docutils literal"><span class="pre">date_head.atom</span></tt></li>
<li><tt class="docutils literal"><span class="pre">date_foot.atom</span></tt></li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>If you intermix flavour templates with entries, make sure you don&#8217;t
have flavours that have the same name as the extension of your blog
entries.</p>
<p class="last">For example, if <tt class="docutils literal"><span class="pre">.txt</span></tt> is the extension for entries in your blog,
don&#8217;t create a <strong>txt</strong> flavour!</p>
</div>
</div>
</div>
<div class="section" id="included-flavours">
<h2>Included flavours<a class="headerlink" href="#included-flavours" title="Permalink to this headline">¶</a></h2>
<p>PyBlosxom comes with the following flavours:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">html</span></tt> - a basic html flavour</li>
<li><tt class="docutils literal"><span class="pre">rss</span></tt> - an RSS 2.0 flavour for syndication</li>
<li><tt class="docutils literal"><span class="pre">atom</span></tt> - an Atom 1.0 flavour for syndication</li>
</ul>
<p>These flavours are included with PyBlosxom and they will work out of the
box with no modifications and no configuration changes.</p>
<p>When you run <tt class="docutils literal"><span class="pre">pyblosxom-cmd</span> <span class="pre">create</span> <span class="pre">&lt;blog-dir&gt;</span></tt>, these get copied
into the flavourdir.</p>
<p>Play with them!  Modify them!  Extend them!</p>
</div>
<div class="section" id="overriding-included-flavours">
<h2>Overriding included flavours<a class="headerlink" href="#overriding-included-flavours" title="Permalink to this headline">¶</a></h2>
<p>PyBlosxom allows you to override templates and flavours on a
category-by-category basis.</p>
<p>For example, Joe has a category devoted to his work on plants which he
wants branded differently than the rest of his blog.  Joe uses the
category <em>work</em> for all his plant work and has a different flavour for
this category of his blog.</p>
<p>Joe&#8217;s blog directory looks like this:</p>
<div class="highlight-python"><pre>/home/joe/blog/
          |- entries/             &lt;-- datadir
          |  |- work/             &lt;-- work category of entries
          |  |- home/             &lt;-- home category of entries
          |
          |- flavours/
             |- html.flav/        &lt;-- html flavour
             |  |- content_type
             |  |- head
             |  |- foot
             |  |- story
             |  |- ...
             |
             |- work/
                |- html.flav/     &lt;-- html flavour for the work category
                |- ...</pre>
</div>
<p>There is a <tt class="docutils literal"><span class="pre">work</span></tt> directory in his <tt class="docutils literal"><span class="pre">flavours</span></tt> directory that
parallels the <tt class="docutils literal"><span class="pre">work</span></tt> directory in his <tt class="docutils literal"><span class="pre">entries</span></tt> directory.  In
Joe&#8217;s blog, the work category has a different html flavour than the
root and home categories.</p>
<p>You can override individual templates, too.</p>
<p>For example, if you had a math category and wanted the story template
to look different, you could set up your blog like this:</p>
<div class="highlight-python"><pre>blog/
  |- entries/
  |  |- math/             &lt;-- math category in datadir
  |
  |- flavours/
     |- html.flav/
     |  |- content_type
     |  |- head
     |  |- date_head
     |  |- story
     |  |- date_foot
     |  |- foot
     |
     |- math/             &lt;-- math category in flavourdir
        |- html.flav/
           |- story</pre>
</div>
<p>If the request is for an entry in the math category, then the <tt class="docutils literal"><span class="pre">story</span></tt>
file will be taken from the <tt class="docutils literal"><span class="pre">flavours/math/html.flav/</span></tt> directory and
the rest of the templates will be taken from <tt class="docutils literal"><span class="pre">flavours/html.flav/</span></tt>.</p>
</div>
<div class="section" id="finding-new-flavours">
<h2>Finding new flavours<a class="headerlink" href="#finding-new-flavours" title="Permalink to this headline">¶</a></h2>
<p>There is a flavour registry on the <a class="reference external" href="http://pyblosxom.bluesock.org/">PyBlosxom website</a>.  You can find
flavours here that have been created by other people and submit
flavours that you&#8217;ve created and want to share.</p>
<p>Additionally, you can use flavours from <a class="reference external" href="http://www.blosxom.com/">Blosxom</a> and themes from
<a class="reference external" href="http://wordpress.org/">WordPress</a> after spending some time converting them.</p>
<p>The order of overiding works like this:</p>
<ol class="arabic simple">
<li>PyBlosxom looks for flavour files that came with PyBlosxom</li>
<li>PyBlosxom starts at the root of the flavourdir and looks for
flavour files there.  If there are some, then these files override
the files PyBlosxom has found so far.</li>
<li>PyBlosxom iterates through category directories in the flavourdir
if there are any that are parallel to the datadir and looks for
flavour directories there.  If there are some, then those files
override the files it has so far.</li>
</ol>
<p>This allows you to easily override specific templates in your blog
(like the header or footer) depending on what category the user is
looking at.</p>
</div>
<div class="section" id="template-variables">
<h2>Template variables<a class="headerlink" href="#template-variables" title="Permalink to this headline">¶</a></h2>
<p>This is the list of variables that are available to your templates.
Templates contain variables that are expanded when the template is
rendered.  Plugins may add additional variables&#8212;refer to plugin
documentation for a list of which variables they add and in which
templates they&#8217;re available.</p>
<div class="section" id="variable-syntax">
<h3>Variable syntax<a class="headerlink" href="#variable-syntax" title="Permalink to this headline">¶</a></h3>
<p>To use a variable in a template, prefix the variable name with a $.
For example, this would expand to the blog&#8217;s title as an h2:</p>
<div class="highlight-python"><pre>&lt;h2&gt;$title&lt;/h2&gt;</pre>
</div>
<p>To reduce ambiguity, use parenthesized variables.:</p>
<div class="highlight-python"><pre>&lt;h2&gt;$(title)&lt;/h2&gt;</pre>
</div>
<p>You can also use variables that expand into functions which
are evaluated:</p>
<div class="highlight-python"><pre>&lt;h2&gt;$(escape(title))&lt;/h2&gt;</pre>
</div>
</div>
<div class="section" id="escaping-the">
<h3>Escaping the $<a class="headerlink" href="#escaping-the" title="Permalink to this headline">¶</a></h3>
<p>If you want a $ in your template that shouldn&#8217;t signify variable expansion,
then you need to escape it with a <tt class="docutils literal"><span class="pre">\</span></tt>:</p>
<div class="highlight-python"><pre>&lt;p&gt;
   This blog is all about \$!
&lt;/p&gt;</pre>
</div>
<p>renders as:</p>
<div class="highlight-python"><pre>This blog is all about $!</pre>
</div>
</div>
<div class="section" id="getting-a-complete-list-of-variables">
<h3>Getting a complete list of variables<a class="headerlink" href="#getting-a-complete-list-of-variables" title="Permalink to this headline">¶</a></h3>
<p>To get a complete list of what variables are available in your blog,
use the debug renderer by changing the value of the <tt class="docutils literal"><span class="pre">renderer</span></tt>
property in your <tt class="docutils literal"><span class="pre">config.py</span></tt> file to <tt class="docutils literal"><span class="pre">debug</span></tt> like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">py</span><span class="p">[</span><span class="s">&quot;renderer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;debug&quot;</span>
</pre></div>
</div>
<p>That will tell you all kinds of stuff about the data structures
involved in the request.  Don&#8217;t forget to change it back when you&#8217;re
done!</p>
</div>
<div class="section" id="url-encoding-and-escaping-of-template-variables">
<h3>URL encoding and escaping of template variables<a class="headerlink" href="#url-encoding-and-escaping-of-template-variables" title="Permalink to this headline">¶</a></h3>
<p>There are two filters allowing for escaped and urlencoded values:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">$escape(title)</span></tt> - escapes <tt class="docutils literal"><span class="pre">$title</span></tt></li>
<li><tt class="docutils literal"><span class="pre">$urlencode(title)</span></tt> - urlencoded <tt class="docutils literal"><span class="pre">$title</span></tt></li>
</ul>
<p>Plugins can add additional filters.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>PyBlosxom versions 1.3 and 1.4 escaped and urlencoded variables
that ended with <tt class="docutils literal"><span class="pre">_escaped</span></tt> and <tt class="docutils literal"><span class="pre">_urlencoded</span></tt>.</p>
<p class="last">Deprecated in PyBlosxom 1.5.</p>
</div>
</div>
<div class="section" id="variables-from-config-py">
<h3>Variables from config.py<a class="headerlink" href="#variables-from-config-py" title="Permalink to this headline">¶</a></h3>
<p>Anything in your <tt class="docutils literal"><span class="pre">config.py</span></tt> file is a variable available to all of
your templates.  For example, these standard properties in your
<tt class="docutils literal"><span class="pre">config.py</span></tt> file are available:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">blog_description</span></tt></li>
<li><tt class="docutils literal"><span class="pre">blog_title</span></tt></li>
<li><tt class="docutils literal"><span class="pre">blog_language</span></tt></li>
<li><tt class="docutils literal"><span class="pre">blog_encoding</span></tt></li>
<li><tt class="docutils literal"><span class="pre">blog_author</span></tt></li>
<li><tt class="docutils literal"><span class="pre">blog_email</span></tt></li>
<li><tt class="docutils literal"><span class="pre">base_url</span></tt> (if you provided it)</li>
<li>...</li>
</ul>
<p>Additionally, any other properties you set in <tt class="docutils literal"><span class="pre">config.py</span></tt> are
available in your templates.  If you wanted to create a
<tt class="docutils literal"><span class="pre">blog_images</span></tt> variable holding the base url of the directory with
all your images in it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">py</span><span class="p">[</span><span class="s">&quot;blog_images&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;http://example.com/~joe/images/&quot;</span>
</pre></div>
</div>
<p>to your <tt class="docutils literal"><span class="pre">config.py</span></tt> file and it would be available in all your
templates.</p>
</div>
<div class="section" id="calculated-template-variables">
<h3>Calculated template variables<a class="headerlink" href="#calculated-template-variables" title="Permalink to this headline">¶</a></h3>
<p>These template variables are available to all templates as well.  They
are calculated based on the request.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">root_datadir</span></tt></dt>
<dd><p class="first">The root datadir of this page?</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">/home/subtle/blosxom/weblogs/tools/pyblosxom</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">url</span></tt></dt>
<dd><p class="first">The PATH_INFO to this page.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">pyblosxom/weblogs/tools/pyblosxom</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">flavour</span></tt></dt>
<dd><p class="first">The flavour that&#8217;s being used to render this page.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">html</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">latest_date</span></tt></dt>
<dd><p class="first">The date of the most recent entry that is going to be rendered.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">Tue,</span> <span class="pre">15</span> <span class="pre">Nov</span> <span class="pre">2005</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">latest_w3cdate</span></tt></dt>
<dd><p class="first">The date of the most recent entry that is going to be rendered in
w3cdate format.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">2005-11-13T17:50:02Z</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">latest_rfc822date</span></tt></dt>
<dd><p class="first">The date of the most recent entry that is going to show in RFC 822
format.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">Sun,</span> <span class="pre">13</span> <span class="pre">Nov</span> <span class="pre">2005</span> <span class="pre">17:50</span> <span class="pre">GMT</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">pi_yr</span></tt></dt>
<dd><p class="first">The four-digit year if the request indicated a year.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">2002</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">pi_mo</span></tt></dt>
<dd><p class="first">The month name if the request indicated a month.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">Sep</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">pi_da</span></tt></dt>
<dd><p class="first">The day of the month if the request indicated a day of the month.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">15</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">pi_bl</span></tt></dt>
<dd><p class="first">The entry the user requested to see if the request indicated a
specific entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">weblogs/tools/pyblosxom</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">pyblosxom_version</span></tt></dt>
<dd><p class="first">The version number and release date of the pyblosxom version you&#8217;re
using.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">1.2</span> <span class="pre">3/25/2005</span></tt></p>
</dd>
</dl>
</div>
<div class="section" id="template-variables-only-available-in-the-date-head-and-date-foot-templates">
<h3>Template variables only available in the date_head and date_foot templates<a class="headerlink" href="#template-variables-only-available-in-the-date-head-and-date-foot-templates" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">date_head</span></tt> and <tt class="docutils literal"><span class="pre">date_foot</span></tt> templates have these additional
variables:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">date</span></tt></dt>
<dd><p class="first">The date string of this day.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">Sun,</span> <span class="pre">23</span> <span class="pre">May</span> <span class="pre">2004</span></tt></p>
</dd>
</dl>
</div>
<div class="section" id="template-variables-only-available-in-the-story-template">
<h3>Template variables only available in the story template<a class="headerlink" href="#template-variables-only-available-in-the-story-template" title="Permalink to this headline">¶</a></h3>
<p>These template variables are only available in your story template.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">title</span></tt></dt>
<dd><p class="first">The title of the entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">First</span> <span class="pre">Post!</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">filename</span></tt></dt>
<dd><p class="first">The absolute path of the file that the entry is stored in.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">/home/subtle/blosxom/weblogs/tools/pyblosxom/firstpost.txt</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">file_path</span></tt></dt>
<dd><p class="first">The filename and extension of the file that the entry is stored in.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">firstpost.txt</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">fn</span></tt></dt>
<dd><p class="first">The filename with no extension of the file that the entry is stored
in.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">firstpost</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">absolute_path</span></tt></dt>
<dd><p class="first">The category/path of the entry (from the perspective of the url).</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">weblogs/tools/pyblosxom</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">body</span></tt></dt>
<dd><p class="first">The text of the entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">&lt;p&gt;This</span> <span class="pre">is</span> <span class="pre">my</span> <span class="pre">first</span> <span class="pre">post!&lt;/p&gt;</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">tb_id</span></tt></dt>
<dd><p class="first">The trackback id of the entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">_firstpost</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">path</span></tt></dt>
<dd><p class="first">The category/path of the entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">weblogs/tools/pyblosxom</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">yr</span></tt></dt>
<dd><p class="first">The four-digit year of the mtime of this entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">2004</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">mo</span></tt></dt>
<dd><p class="first">The month abbreviation of the mtime of this entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">Jan</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">mo_num</span></tt></dt>
<dd><p class="first">The zero-padded month number of the mtime of this entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">01</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ti</span></tt></dt>
<dd><p class="first">The 24-hour hour and minute of the mtime of this entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">16:40</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">date</span></tt></dt>
<dd><p class="first">The date string of the mtime of this entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">Sun,</span> <span class="pre">23</span> <span class="pre">May</span> <span class="pre">2004</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">w3cdate</span></tt></dt>
<dd><p class="first">The date in w3cdate format of the mtime of this entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">2005-11-13T17:50:02Z</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">rfc822date</span></tt></dt>
<dd><p class="first">The date in RFC 822 format of the mtime of this entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">Sun,</span> <span class="pre">13</span> <span class="pre">Nov</span> <span class="pre">2005</span> <span class="pre">17:50</span> <span class="pre">GMT</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">fulltime</span></tt></dt>
<dd><p class="first">The date in YYYYMMDDHHMMSS format of the mtime of this entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">20040523164000</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">timetuple</span></tt></dt>
<dd><p class="first">The time tuple (year, month, month-day, hour, minute, second,
week-day, year-day, isdst) of the mtime of this entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">(2004,</span> <span class="pre">5,</span> <span class="pre">23,</span> <span class="pre">16,</span> <span class="pre">40,</span> <span class="pre">0,</span> <span class="pre">6,</span> <span class="pre">144,</span> <span class="pre">1)</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">mtime</span></tt></dt>
<dd><p class="first">The mtime of this entry measured in seconds since the epoch.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">1085348400.0</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">dw</span></tt></dt>
<dd><p class="first">The day of the week of the mtime of this entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">Sunday</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">da</span></tt></dt>
<dd><p class="first">The day of the month of the mtime of this entry.</p>
<p class="last">Example: <tt class="docutils literal"><span class="pre">23</span></tt></p>
</dd>
</dl>
<p>Also, any variables created by plugins that are entry-centric and any
variables that come from metadata in the entry are available.  See
those sections in this document for more details.</p>
</div>
<div class="section" id="template-variables-from-plugins">
<h3>Template variables from plugins<a class="headerlink" href="#template-variables-from-plugins" title="Permalink to this headline">¶</a></h3>
<p>Many plugins will create additional variables that are available in
templates.  Refer to the documentation of the plugins that you have
installed to see what variables are available and what they do.</p>
</div>
<div class="section" id="template-variables-from-entry-metadata">
<h3>Template variables from entry metadata<a class="headerlink" href="#template-variables-from-entry-metadata" title="Permalink to this headline">¶</a></h3>
<p>You can add metadata to your entries on an individual basis and this
metadata is available to your story templates.</p>
<p>For example, if I had a blog entry like this:</p>
<div class="highlight-python"><pre>First Post!
#mood happy
#music The Doors - Break on Through to the Other Side
&lt;p&gt;
  This is the first post to my new PyBlosxom blog.  I've
  also got two metadata items in it which will be available
  as variables!
&lt;/p&gt;</pre>
</div>
<p>You&#8217;ll have two variables <tt class="docutils literal"><span class="pre">$mood</span></tt> and <tt class="docutils literal"><span class="pre">$music</span></tt> that will also be
available in your story templates.</p>
</div>
</div>
<div class="section" id="invoking-a-flavour">
<h2>Invoking a flavour<a class="headerlink" href="#invoking-a-flavour" title="Permalink to this headline">¶</a></h2>
<p>The flavour for a given page is specified in the extension of the file
being requested.  For example:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">http://example.com/</span></tt> -
brings up the index in the default flavour which is &#8220;html&#8221;</li>
<li><tt class="docutils literal"><span class="pre">http://example.com/index.html</span></tt> -
brings up the index in the &#8220;html&#8221; flavour</li>
<li><tt class="docutils literal"><span class="pre">http://example.com/index.rss</span></tt> -
brings up the index in the &#8220;rss&#8221; flavour (which by default is RSS 0.9.1)</li>
<li><tt class="docutils literal"><span class="pre">http://example.com/2004/05/index.joy</span></tt> -
brings up the index for May of 2004 in the &#8220;joy&#8221; flavour</li>
</ul>
<p>Additionally, you can specify the flavour by adding a <tt class="docutils literal"><span class="pre">flav</span></tt>
variable in the query-string.  Examples:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">http://example.com/</span></tt> -
brings up the index in the default flavour which is &#8220;html&#8221;</li>
<li><tt class="docutils literal"><span class="pre">http://example.com/?flav=rss</span></tt> -
brings up the index in the &#8220;rss&#8221; flavour</li>
<li><tt class="docutils literal"><span class="pre">http://example.com/2004/05/index?flav=joy</span></tt> -
brings up the index for May of 2004 in the &#8220;joy&#8221; flavour</li>
</ul>
</div>
<div class="section" id="setting-default-flavour">
<h2>Setting default flavour<a class="headerlink" href="#setting-default-flavour" title="Permalink to this headline">¶</a></h2>
<p>You can change the default flavour from <tt class="docutils literal"><span class="pre">html</span></tt> to some other flavour
in your <tt class="docutils literal"><span class="pre">config.py</span></tt> file with the <tt class="docutils literal"><span class="pre">default_flavour</span></tt> property:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">py</span><span class="p">[</span><span class="s">&quot;default_flavour&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;joy&quot;</span>
</pre></div>
</div>
<p>Doing this will set the default flavour to use when the URI the user
has used doesn&#8217;t specify which flavour to use.</p>
<p>This url doesn&#8217;t specify the flavour to use, so it will be rendered
with the default flavour:</p>
<div class="highlight-python"><pre>http://example.com/cgi-bin/pyblosxom.cgi/2005/03</pre>
</div>
<p>This url specifies the flavour, so it will be rendered with that
flavour:</p>
<div class="highlight-python"><pre>http://example.com/cgi-bin/pyblosxom.cgi/2005/03/?flav=html</pre>
</div>
</div>
<div class="section" id="order-of-operations-to-figure-out-which-flavour-to-use">
<h2>Order of operations to figure out which flavour to use<a class="headerlink" href="#order-of-operations-to-figure-out-which-flavour-to-use" title="Permalink to this headline">¶</a></h2>
<p>We know that you can specify the default flavour to use in the
<tt class="docutils literal"><span class="pre">config.py</span></tt> file with the <tt class="docutils literal"><span class="pre">default_flavour</span></tt> property.  We know
that the user can specify which flavour to use by the file extension
of the URI.  We also know that the user can specify which flavour to
use by using the <tt class="docutils literal"><span class="pre">flav</span></tt> variable in the query string.</p>
<p>The order in which we figure out which flavour to use is this:</p>
<ol class="arabic simple">
<li>look at the URI extension: if the URI has one, then we use that.</li>
<li>look at the <tt class="docutils literal"><span class="pre">flav</span></tt> querystring variable: if there is one,
then we use that.</li>
<li>look at the <tt class="docutils literal"><span class="pre">default_flavour</span></tt> property in the <tt class="docutils literal"><span class="pre">config.py</span></tt>
file: if there is one, then we use that.</li>
<li>use the <tt class="docutils literal"><span class="pre">html</span></tt> flavour.</li>
</ol>
</div>
<div class="section" id="examples-of-templates">
<h2>Examples of templates<a class="headerlink" href="#examples-of-templates" title="Permalink to this headline">¶</a></h2>
<p>For examples of templates and flavours, see the included flavours that
come with your PyBlosxom installation.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Flavours and Templates</a><ul>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#id2">Flavours and templates</a><ul>
<li><a class="reference internal" href="#storing-flavours-in-the-flavourdir">Storing flavours in the flavourdir</a></li>
<li><a class="reference internal" href="#storing-flavours-in-flavour-directories-in-the-datadir">Storing flavours in flavour directories in the datadir</a></li>
<li><a class="reference internal" href="#storing-flavours-in-the-datadir">Storing flavours in the datadir</a></li>
</ul>
</li>
<li><a class="reference internal" href="#included-flavours">Included flavours</a></li>
<li><a class="reference internal" href="#overriding-included-flavours">Overriding included flavours</a></li>
<li><a class="reference internal" href="#finding-new-flavours">Finding new flavours</a></li>
<li><a class="reference internal" href="#template-variables">Template variables</a><ul>
<li><a class="reference internal" href="#variable-syntax">Variable syntax</a></li>
<li><a class="reference internal" href="#escaping-the">Escaping the $</a></li>
<li><a class="reference internal" href="#getting-a-complete-list-of-variables">Getting a complete list of variables</a></li>
<li><a class="reference internal" href="#url-encoding-and-escaping-of-template-variables">URL encoding and escaping of template variables</a></li>
<li><a class="reference internal" href="#variables-from-config-py">Variables from config.py</a></li>
<li><a class="reference internal" href="#calculated-template-variables">Calculated template variables</a></li>
<li><a class="reference internal" href="#template-variables-only-available-in-the-date-head-and-date-foot-templates">Template variables only available in the date_head and date_foot templates</a></li>
<li><a class="reference internal" href="#template-variables-only-available-in-the-story-template">Template variables only available in the story template</a></li>
<li><a class="reference internal" href="#template-variables-from-plugins">Template variables from plugins</a></li>
<li><a class="reference internal" href="#template-variables-from-entry-metadata">Template variables from entry metadata</a></li>
</ul>
</li>
<li><a class="reference internal" href="#invoking-a-flavour">Invoking a flavour</a></li>
<li><a class="reference internal" href="#setting-default-flavour">Setting default flavour</a></li>
<li><a class="reference internal" href="#order-of-operations-to-figure-out-which-flavour-to-use">Order of operations to figure out which flavour to use</a></li>
<li><a class="reference internal" href="#examples-of-templates">Examples of templates</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="writing_entries.html"
                        title="previous chapter">Writing Entries</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="syndication.html"
                        title="next chapter">Syndication</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/flavours_and_templates.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="syndication.html" title="Syndication"
             >next</a> |</li>
        <li class="right" >
          <a href="writing_entries.html" title="Writing Entries"
             >previous</a> |</li>
        <li><a href="index.html">PyBlosxom 1.5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009-2011, Will Kahn-Greene.
      Last updated on Nov 05, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2pre.
    </div>
  </body>
</html>