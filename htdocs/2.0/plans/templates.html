<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>Flavour/Template improvements</title>
<meta name="author" content="Will Guaraldi &lt;will dot guaraldi at gmail dot com&gt;" />
<link rel="stylesheet" href="manual_style.css" type="text/css" />
</head>
<body>
<div class="document" id="flavour-template-improvements">
<h1 class="title">Flavour/Template improvements</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>Will Guaraldi &lt;will dot guaraldi at gmail dot com&gt;</td></tr>
<tr class="field"><th class="docinfo-name">Originall published:</th><td class="field-body">FIXME</td>
</tr>
<tr class="field"><th class="docinfo-name">URL:</th><td class="field-body"><a class="reference external" href="http://pyblosxom.sourceforge.net/2.0/plans/templates.html">http://pyblosxom.sourceforge.net/2.0/plans/templates.html</a></td>
</tr>
</tbody>
</table>
<div class="section" id="history">
<h1>History</h1>
</div>
<div class="section" id="summary">
<h1>Summary</h1>
<p>This document covers new features and refactoring for the flavour/template
system.</p>
<p>The document also doubles as a specification for how the flavour/template
system works.</p>
</div>
<div class="section" id="flavours-and-templates">
<h1>Flavours and templates</h1>
<p>The flavour/template system comes from Blosxom <a class="footnote-reference" href="#id2" id="id1">[1]</a>.  Much of the functionality
is mirrored with some additional bits that are unique to PyBlosxom.</p>
<p>A flavour is a group of templates that when pieced together with content
produce the output for a response.  For example, the <em>html</em> flavour is
a group of templates which create an HTML document; the <em>atom</em> flavour
is a group of templates which create an Atom document; the <em>RSS</em> flavour
is a group of templates which create an RSS document; ...</p>
<p>A template is a single component of a flavour.</p>
<p>A typical flavour consists of at least the following templates:</p>
<ul class="simple">
<li><em>content_type</em> - Defines the Content-Type of the document.</li>
<li><em>head</em> - The head of the document--comes before all the stories.</li>
<li><em>story</em> - This template is repeated for each entry.</li>
<li><em>foot</em> - The foot of the document--comes after all the stories.</li>
</ul>
<p>PyBlosxom also has:</p>
<ul class="simple">
<li><em>date_head</em> - This comes before a group of entries written on the same day.</li>
<li><em>date_foot</em> - This comes after a group of entries written on the same day.</li>
</ul>
<p>An example page could be laid out as such:</p>
<pre class="literal-block">
head            &lt;html&gt;
                &lt;head&gt;
                   &lt;title&gt;My blog&lt;/title&gt;
                &lt;/head&gt;
                &lt;body&gt;
                   &lt;h1&gt;My blog&lt;/h1&gt;
                   &lt;p&gt;
                      ... a study in examples.
                   &lt;/p&gt;

date_head          &lt;h2&gt;September 8, 2007&lt;/h2&gt;

story 3            &lt;h3&gt;Blunt my pencil is from blogging&lt;/h3&gt;
                   &lt;p&gt;
                      Lo, it hath been 2 minutes since my last blog
                      entry and my pencil (a.k.a. fingers) doth itch
                      to write more!
                   &lt;/p&gt;
                   &lt;p&gt;
                      posted at: 15:04 | /mylife
                   &lt;/p&gt;

story 2            &lt;h3&gt;Lorem ipsum story 2&lt;/h3&gt;
                   &lt;p&gt;
                      Forsooth I did write this here blog entry
                      in my &lt;i&gt;mylife&lt;/i&gt; category and it filled my
                      tummy with joy.
                   &lt;/p&gt;
                   &lt;p&gt;
                      posted at: 15:02 | /mylife
                   &lt;/p&gt;

date_foot          &lt;hr noshade&gt;

date_head          &lt;h2&gt;September 7, 2007&lt;/h2&gt;

story 3            &lt;h3&gt;Look ma!  My first post!&lt;/h3&gt;
                   &lt;p&gt;
                      Despite the difficulties in setting such a thing
                      up, I have succeeded in the face of danger!  My
                      blog is running and this is my first post!
                   &lt;/p&gt;
                   &lt;p&gt;
                      posted at: 18:28 | /myblog
                   &lt;/p&gt;

date_foot          &lt;hr noshade&gt;

foot               &lt;p&gt;
                      This blog is licensed under a ridiculous license
                      that only allows people who are between 15 and 19
                      years of age to read it.  Take that old people!
                   &lt;/p&gt;
                &lt;/body&gt;
                &lt;/html&gt;
</pre>
</div>
<div class="section" id="variables">
<h1>Variables</h1>
<p>Inside the template is a bunch of text and a series of variables that
are expanded when the template is used.  Variables start with a dollar
sign (<tt class="docutils literal"><span class="pre">$</span></tt>) followed by the name of the variable.  For example, the
variable for title would be:</p>
<pre class="literal-block">
$title
</pre>
<p>Variables can be delimited by parentheses:</p>
<pre class="literal-block">
$(title)
</pre>
<p>Variables can be &quot;scoped&quot;:</p>
<pre class="literal-block">
$foo::bar                           $(foo::bar)
</pre>
<p>Variables can be function calls:</p>
<pre class="literal-block">
$foo()                              $(foo())
$foo(bar)                           $(foo(bar))
$foo(1, 2, 3, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;)        $(foo(1, 2, 3, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;))
</pre>
<p>Variables can be escaped:</p>
<pre class="literal-block">
$escape(title)                      $(escape(title))
</pre>
<p>Escaping converts single quotes into <tt class="docutils literal"><span class="pre">&amp;apos;</span></tt> and double quotes to
<tt class="docutils literal"><span class="pre">&amp;quot;</span></tt> .</p>
<p>Variables can be urlencoded:</p>
<pre class="literal-block">
$urlencode(title)                   $(urlencode(title))
</pre>
<p>Urlencoding calls Python's <tt class="docutils literal"><span class="pre">urllib.quote</span></tt> function which:</p>
<blockquote>
<p>&quot;replaces special characters in <strong>string</strong> using the <tt class="docutils literal"><span class="pre">%xx</span></tt> escape.
Letters, digits, and the characters <tt class="docutils literal"><span class="pre">_</span></tt> and <tt class="docutils literal"><span class="pre">-</span></tt> are never quoted.&quot;</p>
<p>From <a class="reference external" href="http://docs.python.org/lib/module-urllib.html">http://docs.python.org/lib/module-urllib.html</a></p>
</blockquote>
<div class="note">
<p class="first admonition-title">Note</p>
<p>Prior to 2.0, escaping was done by tacking on <tt class="docutils literal"><span class="pre">_escaped</span></tt> to the
end of the variable name.  For example:</p>
<pre class="literal-block">
$title_escaped
</pre>
<p>Urlencoding was done by tacking on <tt class="docutils literal"><span class="pre">_urlencoded</span></tt> to the end of
the variable name.  For example:</p>
<pre class="literal-block">
$title_urlencoded
</pre>
<p class="last">These forms have been deprecated.</p>
</div>
</div>
<div class="section" id="flavour-discovery">
<h1>Flavour discovery</h1>
<p>FIXME - talk about how flavours can be stored on the file system</p>
</div>
<div class="section" id="flavour-specification">
<h1>Flavour specification</h1>
<p>FIXME - talk about how PyBlosxom figures out which flavour to use
to render with</p>
</div>
<div class="section" id="footnotes">
<h1>Footnotes</h1>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Blosxom - <a class="reference external" href="http://www.blosxom.com/">http://www.blosxom.com/</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="discussion">
<h1>Discussion</h1>
<p>Discussion of this proposal is at:</p>
<p>gmane.org (FIXME - fill in URL here)</p>
</div>
</div>
<div class="footer">
<hr class="footer" />
<a class="reference external" href="templates.txt">View document source</a>.
Generated on: 2007-10-31 18:17 UTC.
Generated by <a class="reference external" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>
</body>
</html>
